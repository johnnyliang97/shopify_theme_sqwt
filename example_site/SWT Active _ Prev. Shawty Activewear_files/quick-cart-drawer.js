if(!customElements.get("quick-cart-drawer")){class e extends HTMLElement{constructor(){super(),Shopify.designMode&&(window.addEventListener("shopify:section:load",this.init.bind(this)),this.parentElement.addEventListener("shopify:section:select",()=>this.open()),this.parentElement.addEventListener("shopify:section:deselect",()=>this.close()))}connectedCallback(){this.init()}init(){this.toggleState=!1,this.classList.contains("is--open")||document.querySelector("body").classList.remove("overflow-hidden"),this.querySelector(".button--close").addEventListener("click",this.close.bind(this)),this.querySelector(".quick-cart-drawer__backdrop").addEventListener("click",this.close.bind(this)),this.querySelector(".quick-cart-drawer__blocks").addEventListener("keydown",e=>{if("Escape"===e.key&&this.toggleState&&this.close(),this.toggleState){const t=this.querySelectorAll('button, [href], input, select, label, textarea, [tabindex]:not([tabindex="-1"])'),r=t[0],c=t[t.length-1];if(!("Tab"===e.key))return;e.shiftKey?document.activeElement===r&&(e.preventDefault(),c.focus()):document.activeElement===c&&(e.preventDefault(),r.focus())}}),this.initTriggers()}initTriggers(){new MutationObserver(()=>{document.querySelectorAll(".quick-cart-drawer__trigger").forEach(e=>{e._init||(e.addEventListener("click",e=>{this.fetchProductForQuickCartDrawer(e)}),e._init=!0)})}).observe(document.body,{childList:!0,subtree:!0})}async fetchProductForQuickCartDrawer(e){e.target.closest("card-product-slider")&&(e.target.closest("card-product-slider").slider.autoplay.stop(),e.target.closest("card-product-slider").classList.add("product--open-on-quick-cart"));const t=e.target.classList.contains("quick-cart-drawer__trigger--recommendations"),r=e.target.closest("product-card");let c=null;if(!t){if(!r)return;c=r.querySelectorAll('input[type="radio"]:checked:not(.color-option-radio-input), select')}const i=e.target.closest("[data-product-url]");i.classList.toggle("is--loading");try{const e=await fetch(`${i.dataset.productUrl}/?view=quick-cart`);if(!e)return;const t=await e.text(),r=document.createElement("DIV");if(r.insertAdjacentHTML("beforeend",t),!r.querySelector(".quick-cart-product"))return;this.querySelector(".quick-cart-drawer__main").innerHTML="",this.querySelector(".quick-cart-drawer__main").append(r.querySelector(".quick-cart-product")),this.sliderInstance=new Swiper(".quick-cart-drawer__media-swiper",{slidesPerView:1.25,spaceBetween:8,freeMode:{enabled:!0},breakpoints:{750:{slidesPerView:2}}})}catch(e){}finally{i.classList.toggle("is--loading"),t||c.forEach(e=>{const t=this.querySelector(`[name="${e.name}"][value="${e.value}"]`),c=t.parentElement.parentElement.querySelector("legend");c.innerHTML;if(this.querySelectorAll(`[name="${e.name}"]`).forEach(e=>{e.removeAttribute("checked"),e.closest("li").classList.remove("checked")}),t){t.setAttribute("checked","");const r=c.querySelector("[data-selected-variant]");r&&(r.innerHTML=e.value)}this.querySelector("product-card").querySelector('input[name="id"]').value=r.querySelector('input[name="id"]').value,t&&t.closest("li").classList.add("checked"),this.querySelector("product-card").init()}),setTimeout(()=>{this.open()},500),this.querySelector(".quick-cart-drawer__main").querySelectorAll(".variant-option-radio-input").forEach(e=>{e.addEventListener("change",e=>{const t=e.target.parentElement.parentElement.querySelector("legend").querySelector("[data-selected-variant]");t&&(t.innerHTML=e.target.value);const r=this.querySelector(".product-card__add-to-cart--form input[name='id']").value,c=this.querySelector("product-card").variantsObj;if(!c)return;const i=c.find(e=>e.id==r)?.featured_media;i&&this.setActiveMedia(i.id)})})}}setActiveMedia(e){const t=Array.from(this.querySelectorAll("[data-media-id]")).find(t=>Number(t.dataset.mediaId)===e);t&&this.sliderInstance.slideTo(Number(t.dataset.index))}toggle(){this.toggleState?this.close():this.open()}open(){this.toggleState=!0,document.querySelector("body").classList.add("overflow-hidden");const e=document.querySelector(".quick-cart-drawer__blocks"),t=e.querySelector(".button--close");e.setAttribute("tabindex","0"),t.setAttribute("tabindex","0"),this.classList.add("is--open"),this.opened();const r=this.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');r&&r.focus()}close(){this.toggleState=!1;const e=document.querySelector("shop-the-look-drawer");e&&!e.classList.contains("is--open")&&document.querySelector("body").classList.remove("overflow-hidden"),e||document.querySelector("body").classList.remove("overflow-hidden"),this.classList.remove("is--open"),this.closed(),this.toggleAriaExpanded(),document.querySelector("card-product-slider.product--open-on-quick-cart")&&(document.querySelector("card-product-slider.product--open-on-quick-cart").slider.autoplay.start(),document.querySelector("card-product-slider.product--open-on-quick-cart").classList.remove("product--open-on-quick-cart"))}toggleAriaExpanded(e){e?(e.target.closest("button")&&e.target.closest("button").setAttribute("aria-expanded",!0),this.querySelector(".button--close").setAttribute("aria-expanded",!0)):document.querySelectorAll('[aria-controls="quick-cart-drawer"]').forEach(e=>{e.setAttribute("aria-expanded",!1)})}opened(){const e=new Event("opened",{bubbles:!0});this.dispatchEvent(e)}closed(){const e=new Event("closed",{bubbles:!0});this.dispatchEvent(e)}}customElements.define("quick-cart-drawer",e)}