let currentVariantId,productData,arrayOfSwymCollectionsButtons,variantImagesArray,productURL,selectedVariant={},globalActionArray=[],globalListArray=[],globalProductsInListArray=[],selectCallBackObj=[];function customErrorHandling(t){_swat.ui.uiRef.showErrorNotification({message:t})}function customSuccessHandling(t){_swat.ui.uiRef.showSuccessNotification({message:t})}function performListAction(t){let e=t.target.getAttribute("list-id"),i="true"===t.target.getAttribute("variantExistsInList");var n={epi:currentVariantId,empi:productData.product.id,du:productURL};function s(){_swat.fetchLists({callbackFn:function(t){globalListArray=t,globalListArray.forEach(t=>{let e=document.querySelector(`.swym-custom-list-button[data-list-id="${t.lid}"]`);e&&(e.innerHTML=`${t.lname} (${t.listcontents.length})`)})},errorFn:function(t){console.log("Error while fetching all Lists",t)}})}if(i){let i=function(e){t.target.setAttribute("variantexistsinlist","false"),t.target.innerHTML="Add",s(),generateUpdateMessage()},o=function(t){console.log("Error while deleting the Product",t)};_swat.deleteFromList(e,n,i,o)}else{let i=function(e){t.target.setAttribute("variantexistsinlist","true"),t.target.innerHTML="Remove";let i=t.target.getAttribute("list-name");s(),customSuccessHandling(`${productData.product.title} has been successfully added to ${i}`)},o=function(t){console.log("Error while adding the Product to the List",t)};_swat.addToList(e,n,i,o)}}function onSwymLoadCallback(t){const e=t.retailerSettings.UI.Language?t.retailerSettings.UI.Language:"english",i=document.getElementById("swym-custom-collections-modal-background"),n=document.getElementById("swym-custom-modal-title"),s=document.getElementById("swym-custom-multiple-list-parent-container"),o=document.getElementById("swym-custom-select-preference-text"),a=document.getElementById("swym-custom-select-wishlists-text"),l=document.getElementById("swym-list-guide-text"),r=document.querySelector("body"),c=document.getElementById("swym-custom-modal-close"),d=document.getElementById("swym-custom-mobile-title"),m=document.getElementById("swym-create-list-title"),u=document.getElementById("swym-custom-variant-selector-container"),g=document.getElementById("swym-custom-add-to-wishlist-button"),y=!t.retailerSettings.Wishlist.EnableCollections,h=document.getElementById("swym-custom-list-id-container"),L=document.getElementById("swym-custom-create-list-button"),f=document.getElementById("swym-custom-confirm-list-button"),p=document.getElementById("swym-custom-backdrop"),w=document.getElementById("swym-custom-notconfirm-list-button"),b=document.getElementById("swym-custom-new-list-name-input"),v=document.getElementById("swym-custom-primary-image"),E=document.getElementById("swym-custom-vendor-title"),T=document.getElementById("swym-custom-product-title"),A=document.getElementById("swym-custom-variant-price"),S=document.getElementById("swym-custom-variant-title"),x=document.getElementById("swym-custom-image-blob-container"),I=document.getElementById("swym-custom-images-slide-container"),$=document.getElementById("swym-custom-slide-arrow-prev"),B=document.getElementById("swym-custom-slide-arrow-next"),C={english:{defaultWishlistTitle:themeSettings.defaultWishlistTitle,desktopModalTitle:themeSettings.desktopModalTitle,addedToSingleList:themeSettings.addedToSingleList,addedToMultipleLists:themeSettings.addedToMultipleLists,selectPreferenceText:themeSettings.selectPreferenceText,selectWishlistText:themeSettings.selectWishlistText,createListButtonText:themeSettings.createListButtonText,createListInputPlaceHolder:themeSettings.createListInputPlaceHolder,addToWishlistTextNoListSelected:themeSettings.addToWishlistTextNoListSelected,addToWishlistTextAddState:themeSettings.addToWishlistTextAddState,addToWishlistTextUpdateState:themeSettings.addToWishlistTextUpdateState,singleWishlistButtonAddText:themeSettings.singleWishlistButtonAddText,singleWishlistButtonRemoveText:themeSettings.singleWishlistButtonRemoveText,createListModalTitle:themeSettings.createListModalTitle,createListGuideText:themeSettings.createListGuideText,confirmNewListButtonText:themeSettings.confirmNewListButtonText,notificationAddText:themeSettings.notificationAddText,notificationRemoveText:themeSettings.notificationRemoveText,notificationUpdateText:themeSettings.notificationUpdateText,listNameError:themeSettings.listNameError,listNameNotUniqueError:themeSettings.listNameNotUniqueError,listLimitErrorMessage:themeSettings.listLimitErrorMessage}},k=C[e]?C[e]:C.english,H=k.defaultWishlistTitle;function M(t,e=300){let i;return(...n)=>{i||t.apply(this,n),clearTimeout(i),i=setTimeout(()=>{i=void 0},e)}}async function W(){return new Promise((e,i)=>{t.fetchLists({callbackFn:function(i){if(globalListArray=i,i.length<1&&y){let e={lname:"My Wishlist"},i=function(t){updateGlobalListArray()},n=function(t){console.log("Error while creating a List",t)};t.createList(e,i,n)}i.forEach(t=>{t.listcontents.forEach(t=>{let e=t.empi,i=document.querySelector(`button#swym-collections[data-product-id="${e}"]`);i&&!i.classList.contains("swym-added")&&SwymUtils.addClass(i,"swym-added")})}),e()},errorFn:function(t){console.error("Error while fetching all Lists",t),i(t)}})})}function U(t){const e=document.createElement("div"),i=new Image;SwymUtils.addClass(e,"zoomed-image"),i.src=t.target.src,e.appendChild(i);const n=document.createElement("button");n.setAttribute("aria-label","Close zoomed image"),n.classList.add("swym-zoomed-image-close-button","close-button"),n.innerHTML="&times;",n.addEventListener("click",()=>{document.body.removeChild(e)}),e.appendChild(n),document.body.appendChild(e),e.addEventListener("click",t=>{t.target===e&&document.body.removeChild(e)})}function N(t){const e=t.target.getAttribute("src"),i=document.querySelectorAll("#swym-custom-image-blob");v.src=e,i.forEach(e=>{e!==t.target&&e.classList.remove("selected")}),SwymUtils.toggleClass(t.target,"selected")}function q(){let t=[];variantImagesArray.forEach((e,i)=>{const n=document.createElement("img");n.src=e.src,n.ariaLabel=`product-image-${i}`,n.className="swym-custom-slider-image",n.width="250",n.height="250",n.addEventListener("click",U),t.push(n),I.appendChild(n)}),function(){const t=document.querySelector(".swym-custom-slider-image");B.addEventListener("click",()=>{const e=t.clientWidth;I.scrollLeft+=e}),$.addEventListener("click",()=>{const e=t.clientWidth;I.scrollLeft-=e})}()}function D(){if(y){const t=globalProductsInListArray.some(t=>t.epi===currentVariantId);g.classList.toggle("variant-in-wishlist",t),g.textContent=t?k.singleWishlistButtonRemoveText:k.addToWishlistTextAddState}else globalListArray.forEach(t=>{const e=t.lid,i=document.querySelector(`#swym-list-action-btn[list-id="${e}"]`),n=i&&t.listcontents.some(t=>t.epi===currentVariantId);i&&(i.setAttribute("variantexistsinlist",n),i.innerHTML=n?"Remove":"Add")});j()}function R(){document.querySelectorAll(".swym-custom-list-button").forEach(t=>{t.addEventListener("click",t=>{t.target.classList.contains("selected")?t.target.classList.remove("selected"):t.target.classList.add("selected"),function(){let t=document.querySelectorAll(".swym-custom-list-button");globalActionArray=[],t.forEach(t=>{!t.checked&&t.classList.contains("variant-in-wishlist")?globalActionArray.push({actionType:"remove",listId:`${t.getAttribute("data-list-id")}`}):t.checked&&!t.classList.contains("variant-in-wishlist")&&globalActionArray.push({actionType:"add",listId:`${t.getAttribute("data-list-id")}`})}),j()}()})}),D()}function P(){if(y)y&&(t.fetch(t=>{globalProductsInListArray=t,D()},t=>customErrorHandling(t.description)),V());else{s.classList.remove("swym-hide-container"),L.classList.remove("swym-hide-container"),g.innerHTML="Done";const e=t=>{globalListArray=t;const e=t.map(t=>{let e=t.listcontents.some(t=>t.epi==currentVariantId);return`\n                    <div id="swym-list-action-wrapper" class="swym-global-font-family">\n                        <div id="${t.lid}-${productData.product.id}" list-name="${t.lname}" aria-label="Select ${t.lname}" class="swym-custom-list-button" type="checkbox" data-list-id="${t.lid}">${t.lname} (${t.listcontents.length})</div>\n                        <button list-id="${t.lid}" list-name="${t.lname}" onclick="performListAction(event)" id="swym-list-action-btn" variantExistsInList="${e}">${e?"Remove":"Add"}</button>\n                    </div>`}).join("");h.innerHTML=e,R(),D(),globalListArray.length<1&&L.click(),V()},i=t=>customErrorHandling(t.description);t.fetchLists({callbackFn:e,errorFn:i})}}function V(){!function(t){globalActionArray=[];const e=productData.product.variants;let i=!1;e.forEach(e=>{const n=function(t){return Object.values(t).join(" / ")}(t);n==e.title&&(i=!0,selectedVariant=e,currentVariantId=e.id)}),i?(g.removeAttribute("disabled"),g.textContent="Done"):(g.setAttribute("disabled",!0),g.textContent="Combination Unavailable");D()}(selectCallBackObj);const e=productData.product.title,i=productData.product.vendor,n=productData.product.images,s=selectedVariant.title.replace(/\//g,""),o=t.currency+" "+selectedVariant.price,a=selectedVariant.image_id;E.innerHTML="By: "+i,T.innerHTML=e,S.innerHTML=s,A.innerHTML=o;for(let t=0;t<n.length;t++)n[t].id==a?v.setAttribute("src",n[t].src):v.setAttribute("src",productData.product.image.src)}function O(){const t=productData.product;v.src=t.image.src,E.innerHTML=t.vendor,T.innerHTML=t.title,d.textContent=t.title,A.innerHTML=t.variants[0].price,P(),function(){variantImagesArray=productData.product.images,q();const t=variantImagesArray.map((t,e)=>{const i=document.createElement("img");return i.width="24",i.height="24",i.ariaLabel=`Product Secondary Image-${e}`,i.id="swym-custom-image-blob",i.src=t.src,i.addEventListener("click",N),i});x.innerHTML="",x.append(...t)}(),function(){const t=productData.product.options.map((t,e)=>function(t,e){const i=t.values.map(i=>`<input style="display: none;" selected="${i==selectedVariant[`option${e+1}`]}" id="${t.name}-${i}" type="radio" name="${t.name}" optionIndex="${e}" value="${i}" aria-label="${t.name} ${i}"></input>\n                        <label class="swym-filter-labels" for="${t.name}-${i}">${i}</label>`).join(""),n=document.createElement("div");n.setAttribute("class",`${t.name} swym-filter-option-name`),n.innerHTML=`<div id="swymOptionName" selected value="${t.name}">${t.name}</div>\n                                  <div class="swym-radio-buttons-container">${i}</div>`;const s=n.querySelectorAll(`[name="${t.name}"]`);for(let t=0;t<s.length;t++)s[t].addEventListener("click",function(t){_(t)});return n}(t,e));u.innerHTML="",t.forEach(t=>{u.append(t)}),t.forEach(t=>{const e=t.querySelectorAll('input[type="radio"]');e.length>0&&e[0].click()})}()}function j(){if(!y)if(0===globalActionArray.length);else{const t=globalActionArray.some(t=>"remove"===t.actionType);g.removeAttribute("disabled"),g.textContent=t?k.addToWishlistTextUpdateState:k.addToWishlistTextAddState}}function F(){const e={epi:currentVariantId,empi:productData.product.id,du:productURL};y?function(e){let i=globalListArray[0].lid,n=function(t){},s=function(t){console.log("Error while adding the Product to the List",t)};if(g.classList.contains("variant-in-wishlist")){t.deleteFromList(i,e,n,s);customSuccessHandling(`${T.textContent} ${S.textContent} ${k.notificationRemoveText}`)}else{t.addToList(i,e,n,s);customSuccessHandling(`${T.textContent} ${S.textContent} ${k.notificationAddText}`)}}(e):G(),G()}function _(t){const e=t.target.value,i=t.currentTarget.getAttribute("optionIndex");selectCallBackObj={...selectCallBackObj,[i]:e};t.currentTarget.parentNode.querySelectorAll(`label[for="${t.target.id}"]`).forEach(t=>{t.classList.add("selected")});t.currentTarget.parentNode.querySelectorAll(`input[type="radio"]:not([value="${e}"])`).forEach(e=>{t.currentTarget.parentNode.querySelectorAll(`label[for="${e.id}"]`).forEach(t=>{t.classList.remove("selected")})}),V()}function G(){selectCallBackObj={},i.classList.add("swym-hide-container"),r.classList.remove("swym-modal-active"),I.innerHTML="",u.innerHTML="",x.innerHTML="",h.innerHTML=""}function z(t){const e=t.target.getAttribute("data-product-url");productURL=e.split("?")[0];fetch(productURL+".json").then(t=>t.json()).then(t=>{productData=t,selectedVariant=productData.product.variants[0],O(),i.classList.remove("swym-hide-container"),v.addEventListener("click",U),r.classList.add("swym-modal-active"),globalActionArray=[],window.addEventListener("click",t=>{t.target===i&&G()}),I.scrollLeft=0})}n.textContent=k.desktopModalTitle,o.textContent=k.selectPreferenceText,a.textContent=k.selectWishlistText,L.textContent=k.createListButtonText,l.textContent=k.createListGuideText,m.textContent=k.createListModalTitle,f.textContent=k.confirmNewListButtonText,b.setAttribute("placeholder",k.createListInputPlaceHolder),t.evtLayer.addEventListener(t.JSEvents.removedFromWishlist,function(t){!async function(t){try{if(await W(),!globalListArray.some(e=>e.listcontents.some(e=>e.empi===t))){const e=document.querySelector(`button#swym-collections[data-product-id="${t}"]`);e&&SwymUtils.removeClass(e,"swym-added")}}catch(t){console.error("An error occurred:",t)}}(t.detail.d.empi)}),t.evtLayer.addEventListener(t.JSEvents.addedToWishlist,function(t){!function(t){let e=document.querySelector(`button#swym-collections[data-product-id="${t}"]`);e&&!e.classList.contains("swym-added")&&SwymUtils.addClass(e,"swym-added")}(t.detail.d.empi)}),function(){function t(){p.classList.add("swym-hide-container"),L.removeAttribute("disabled")}L.addEventListener("click",function(){const t=H+" "+(globalListArray.length+1);globalListArray.length>=10?customErrorHandling(k.listLimitErrorMessage):(p.classList.remove("swym-hide-container"),L.setAttribute("disabled",!0),b.value=t,b.select())}),w.addEventListener("click",t),p.addEventListener("click",e=>{e.target===p&&t()})}(),function(){function e(){b.value="",b.focus(),b.select()}f.addEventListener("click",()=>{const i=b.value.trim();if(i.length<3||i.length>50)customErrorHandling(k.listNameError),e();else if(n=i,globalListArray.some(t=>t.lname===n)){customErrorHandling(`${i} ${k.listNameNotUniqueError}`),e()}else!function(e){const i={lname:e};t.createList(i,t=>{P(),p.classList.add("swym-hide-container"),L.removeAttribute("disabled")},t=>customErrorHandling(t.description))}(i);var n})}(),function(){if(arrayOfSwymCollectionsButtons=document.querySelectorAll("#swym-collections"),arrayOfSwymCollectionsButtons)for(let t=0;t<arrayOfSwymCollectionsButtons.length;t++)arrayOfSwymCollectionsButtons[t].addEventListener("click",M(z,500)),SwymUtils.addClass(arrayOfSwymCollectionsButtons[t],"swym-custom-loaded");c.addEventListener("click",G),g.addEventListener("click",M(F,500)),W()}()}window.SwymCallbacks||(window.SwymCallbacks=[]),window.SwymCallbacks.push(onSwymLoadCallback);