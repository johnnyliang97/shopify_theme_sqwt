{%- style -%}
  #SWTDuoBanner-{{ section.id }} {
    position: relative;
    isolation: isolate;
  }
  #SWTDuoBanner-{{ section.id }}::after {
    content: '';
    position: absolute;
    inset: 0;
    background: {{ section.settings.overlay_color }};
    opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }};
    pointer-events: none;
    z-index: 1;
  }
  #SWTDuoBanner-{{ section.id }} .swt-banner__inner {
    display: flex;
    width: 100%;
    height: 100%;
  }
  #SWTDuoBanner-{{ section.id }}.swt-banner--small { min-height: 42rem; }
  #SWTDuoBanner-{{ section.id }}.swt-banner--medium { min-height: 56rem; }
  #SWTDuoBanner-{{ section.id }}.swt-banner--large { min-height: 72rem; }
  #SWTDuoBanner-{{ section.id }}.swt-banner--adapt { min-height: unset; }
  #SWTDuoBanner-{{ section.id }} .swt-banner__item {
    position: relative;
    flex: 1 1 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }
  #SWTDuoBanner-{{ section.id }} .swt-banner__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  #SWTDuoBanner-{{ section.id }} .swt-banner__content {
    position: absolute;
    z-index: 2;
    display: flex;
    flex-direction: column;
    gap: 14px;
    color: {{ section.settings.text_color }};
    padding: 20px;
    margin: var(--pad-y, 0px) var(--pad-x, 0px);
    text-shadow: 0 0 1px rgba(0,0,0,.12);
  }
  #SWTDuoBanner-{{ section.id }} .swt-heading {
    font-weight: 700;
    letter-spacing: .04em;
    text-transform: uppercase;
    margin: 0;
  }
  #SWTDuoBanner-{{ section.id }} .swt-btn {
    display: inline-block;
    border: 1px solid currentColor;
    color: {{ section.settings.text_color }};
    background: transparent;
    padding: 12px 22px;
    line-height: 1;
    letter-spacing: .05em;
    text-transform: uppercase;
  }
  #SWTDuoBanner-{{ section.id }} .swt-badge {
    display: inline-block;
    background: rgba(255,255,255,.2);
    color: {{ section.settings.text_color }};
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 12px;
    letter-spacing: .03em;
  }
  #SWTDuoBanner-{{ section.id }} .swt-pos-top-left { align-items: flex-start; justify-content: flex-start; }
  #SWTDuoBanner-{{ section.id }} .swt-pos-top-right { align-items: flex-start; justify-content: flex-end; }
  #SWTDuoBanner-{{ section.id }} .swt-pos-middle-left { align-items: center; justify-content: flex-start; }
  #SWTDuoBanner-{{ section.id }} .swt-pos-middle-center { align-items: center; justify-content: center; }
  #SWTDuoBanner-{{ section.id }} .swt-pos-middle-right { align-items: center; justify-content: flex-end; }
  #SWTDuoBanner-{{ section.id }} .swt-pos-bottom-left { align-items: flex-end; justify-content: flex-start; }
  #SWTDuoBanner-{{ section.id }} .swt-pos-bottom-right { align-items: flex-end; justify-content: flex-end; }
  #SWTDuoBanner-{{ section.id }} .swt-banner__divider {
    position: absolute;
    left: 50%;
    top: 0;
    bottom: 0;
    width: 1px;
    background: rgba(255,255,255,.25);
    z-index: 2;
  }
  @media screen and (max-width: 749px) {
    #SWTDuoBanner-{{ section.id }} .swt-banner__inner { flex-direction: column; }
    #SWTDuoBanner-{{ section.id }} .swt-banner__item { flex-basis: 100%; }
    #SWTDuoBanner-{{ section.id }} .swt-banner__divider { display: none; }
  }
{%- endstyle -%}

{%- liquid
  assign fetch_priority = 'auto'
  if section.index == 1
    assign fetch_priority = 'high'
  endif
-%}

<section id="SWTDuoBanner-{{ section.id }}" class="swt-banner swt-banner--{{ section.settings.image_height }}">
  <div class="swt-banner__inner">
    {%- for block in section.blocks -%}
      {%- if block.type == 'tile' -%}
      <div class="swt-banner__item swt-pos-{{ block.settings.content_position }}" {{ block.shopify_attributes }}>
        {%- if block.settings.image != blank -%}
          {%- liquid
            assign image_height = block.settings.image.width | divided_by: block.settings.image.aspect_ratio
          -%}
          {{
            block.settings.image
            | image_url: width: 3840
            | image_tag:
              width: block.settings.image.width,
              height: image_height,
              class: 'swt-banner__image',
              sizes: '100vw',
              widths: '375, 750, 1100, 1500, 1780, 2000, 3000, 3840',
              fetchpriority: fetch_priority
          }}
        {%- else -%}
          {{ 'hero-apparel-1' | placeholder_svg_tag: 'placeholder-svg swt-banner__image' }}
        {%- endif -%}
        <div class="swt-banner__content" style="--pad-x: {{ block.settings.content_padding_x }}px; --pad-y: {{ block.settings.content_padding_y }}px;">
          {%- if block.settings.badge_text != blank -%}
            <span class="swt-badge">{{ block.settings.badge_text }}</span>
          {%- endif -%}
          {%- if block.settings.heading != blank -%}
            <h2 class="swt-heading {{ block.settings.heading_size }}">{{ block.settings.heading }}</h2>
          {%- endif -%}
          {%- if block.settings.button_label != blank -%}
            <a {% if block.settings.button_link != blank %}href="{{ block.settings.button_link }}"{% else %}role="link" aria-disabled="true"{% endif %} class="swt-btn">{{ block.settings.button_label }}</a>
          {%- endif -%}
        </div>
      </div>
      {%- endif -%}
    {%- endfor -%}
    <span class="swt-banner__divider" aria-hidden="true"></span>
  </div>
</section>

{% schema %}
{
  "name": "Duo Image Banner",
  "tag": "section",
  "class": "section",
  "disabled_on": { "groups": ["header", "footer"] },
  "settings": [
    { "type": "select", "id": "image_height", "label": "Image height", "options": [
      { "value": "adapt", "label": "Adapt to image" },
      { "value": "small", "label": "Small" },
      { "value": "medium", "label": "Medium" },
      { "value": "large", "label": "Large" }
    ], "default": "medium" },
    { "type": "color", "id": "overlay_color", "label": "Overlay color", "default": "#8bb9d9" },
    { "type": "range", "id": "overlay_opacity", "label": "Overlay opacity", "min": 0, "max": 100, "step": 5, "unit": "%", "default": 30 },
    { "type": "color", "id": "text_color", "label": "Text color", "default": "#ffffff" }
  ],
  "blocks": [
    {
      "type": "tile",
      "name": "Banner tile",
      "limit": 2,
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Image" },
        { "type": "inline_richtext", "id": "heading", "label": "Heading", "default": "SIGNATURE SILHOUETTES" },
        { "type": "select", "id": "heading_size", "label": "Heading size", "options": [
          { "value": "h2", "label": "H2" },
          { "value": "h1", "label": "H1" },
          { "value": "h0", "label": "H0" }
        ], "default": "h1" },
        { "type": "text", "id": "badge_text", "label": "Badge text", "default": "Special Discount" },
        { "type": "text", "id": "button_label", "label": "Button label", "default": "Shop Styles" },
        { "type": "url", "id": "button_link", "label": "Button link" },
        { "type": "select", "id": "content_position", "label": "Content position", "options": [
          { "value": "top-left", "label": "Top left" },
          { "value": "top-right", "label": "Top right" },
          { "value": "middle-left", "label": "Middle left" },
          { "value": "middle-center", "label": "Middle center" },
          { "value": "middle-right", "label": "Middle right" },
          { "value": "bottom-left", "label": "Bottom left" },
          { "value": "bottom-right", "label": "Bottom right" }
        ], "default": "bottom-left" },
        { "type": "range", "id": "content_padding_x", "label": "Content horizontal padding", "min": 0, "max": 80, "step": 4, "unit": "px", "default": 20 },
        { "type": "range", "id": "content_padding_y", "label": "Content vertical padding", "min": 0, "max": 80, "step": 4, "unit": "px", "default": 20 }
      ]
    }
  ],
  "presets": [
    { "name": "Duo Image Banner", "blocks": [ { "type": "tile" }, { "type": "tile" } ] }
  ]
}
{% endschema %}
